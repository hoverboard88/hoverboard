(this.webpackJSONPwpmdb=this.webpackJSONPwpmdb||[]).push([[8],{810:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(1),i=a(6),s=a(39),r=a(13),o=a(124),p=a.n(o),u=a(43),d=a(20),m=a.n(d),b=a(12),f=a.n(b),g=a(225),_=Object(i.c)(function(e){return{theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version}},{})(function(e){var t="",a=e.theme_plugin_files,n=e.disabled,l=e.local_version,i=e.panelsOpen;if(n)return c.a.createElement(g.a,{message:e.theme_plugin_files.message,pluginSlug:"wp-migrate-db-pro-theme-plugin-files",remoteUpgradable:e.theme_plugin_files.remoteUpgradable,version:l,shortName:s.c});!m()(i,e.type)&&a[e.type].enabled&&(t=e.summary);return c.a.createElement(c.a.Fragment,null,f()(t))}),h=a(661),O=a(100),v=a(24),j=function(e){var t=Object(i.d)(),a=e.theme_plugin_files,n=e.type,l=e.disabled,s="undefined"!==typeof a&&a[e.type].enabled,r="enable-".concat(n),o="panel-title-".concat(n),p=function(a){if(l)return a.preventDefault(),!1;t(s?Object(v.h)(e.type):Object(v.c)(e.type)),function(e){e.toggleThemePluginFiles(e.type)}(e,e.type)};return c.a.createElement("div",{className:"tpf-panel-header"},c.a.createElement("input",{type:"checkbox",onChange:p,checked:s,id:r,"aria-labelledby":o}),c.a.createElement("h4",{id:o,className:"panel-title"},c.a.createElement("label",{htmlFor:r,onClick:p},e.title," ")))},E=a(25),y=a(170),x=function(e){var t=e.ariaLabel,a=e.optionChoices,n=e.type,l=e.value,s=Object(i.d)(),r=a,o=function(t){s(e.updateOption(t.target.value,n))},p=Object.keys(r).map(function(e){var t=n+"-"+e,a=l===e;return c.a.createElement("div",{key:e},c.a.createElement("input",{id:t,type:"radio",value:e,checked:a,onChange:o,name:n}),c.a.createElement("label",{for:t},f()(r[e])))});return c.a.createElement("div",{className:"radiogroup",role:"radiogroup","aria-label":t},p)},w=a(99),P=function(e,t,a){var n=[];if("object"===typeof t){var c=Object.values(t).map(function(e){return e[0].path});"selected"===a["".concat(e,"_option")]&&a["".concat(e,"_selected")].forEach(function(e){c.includes(e)&&n.push(e)}),"except"===a["".concat(e,"_option")]&&a["".concat(e,"_excluded")].forEach(function(e){c.includes(e)&&n.push(e)}),"active"===a["".concat(e,"_option")]&&Object.values(t).forEach(function(e){e[0].active&&n.push(e[0].path)}),"all"===a["".concat(e,"_option")]&&(n=c)}return n};var S=function(e,t){var a=e.theme_plugin_files,o=e.panelsOpen,d=e.current_migration,m=e.remote_site,b=e.local_site,f=d.status,g=d.intent,v=function(e){var t=e.theme_plugin_files;return"undefined"!==typeof t.available&&!t.available}(e),S=Object(i.d)(),k=t.title,N=t.type,C=t.panel_name,F=t.items,T=F.map(function(e){return e.path}),U=!1,L=g.charAt(0).toUpperCase()+g.slice(1),D={all:Object(l.c)(Object(l.a)("%s all %s","wp-migrate-db"),L,N),active:Object(l.c)(Object(l.a)("%s only active %s","wp-migrate-db"),L,N),selected:Object(l.c)(Object(l.a)("%s only selected %s","wp-migrate-db"),L,N),except:Object(l.c)(Object(l.a)("%s all %s <b>except</b> those selected","wp-migrate-db"),L,N)},J=function(e,t,a,n,c){var l=c.site_details,i=P(n,"plugins"===n?l.plugins:l.themes,e);return{enabled:e["".concat(n.slice(0,-1),"_files")].enabled,isOpen:t.includes("".concat(n.slice(0,-1),"_files")),selected:i,selectionEmpty:p()(a,{name:"SELECTED_".concat(n.toUpperCase(),"_EMPTY")})}}(a,o,f,N,"pull"===g?m:b),M=J.enabled,A=J.isOpen,I=J.selected,Y=J.selectionEmpty;Object(n.useEffect)(function(){"select"===a["".concat(N,"_option")]&&S(e.updateSelected(I,N)),"except"===a["".concat(N,"_option")]&&e.updateExcluded(I,N)},[]),I.length&&M&&!A&&(U=!0);var q=[],z="selected"===a["".concat(N,"_option")]||"except"===a["".concat(N,"_option")];return U&&q.push("has-divider"),M&&q.push("enabled"),c.a.createElement(u.a,{title:k,className:q.join(" "),header:c.a.createElement(j,Object(r.a)({},e,{items:F,disabled:v,selected:I,title:k,type:C})),panelName:C,disabled:v,forceDivider:U,callback:function(t){return Object(y.b)(t,C,A,M,v,e.addOpenPanel,e.removeOpenPanel,function(){return S(Object(s.j)(C))})},bodyClass:"tpf-panel-body",panelSummary:c.a.createElement(_,Object(r.a)({},e,{disabled:v,items:F,selected:I,title:k,type:C,summary:D[a["".concat(N,"_option")]]}))},c.a.createElement("div",null,c.a.createElement(x,{ariaLabel:Object(l.a)("Plugin options","wp-migrate-db"),optionChoices:D,intent:"push",type:N,value:a["".concat(N,"_option")],updateOption:s.p}),c.a.createElement(w.a,{id:"".concat(N,"-multiselect"),options:F,extraLabels:"",stateManager:function(t){"except"===a["".concat(N,"_option")]&&e.updateExcluded(t,N),e.updateSelected(t,N)},selected:I,visible:!0,disabled:!z,updateSelected:function(t){var n=t.map(function(e){return e.path});"except"===a["".concat(N,"_option")]?e.updateExcluded(n,N):e.updateSelected(n,N)},selectInverse:function(){return"except"===a["".concat(N,"_option")]?Object(O.a)(e.updateExcluded,T,I,N):Object(O.a)(e.updateSelected,T,I,N)},showOptions:z})),c.a.createElement("div",{className:"excludes-wrap"},c.a.createElement(h.a,Object(r.a)({},e,{excludes:a.excludes,excludesUpdater:e.updateExcludes,type:N}))),Y&&c.a.createElement(E.c,{className:"error-msg"},"selected"===a["".concat(N,"_option")]&&Object(l.c)(Object(l.a)("Please select at least one %s for migration","wp-migrate-db"),"themes"===N?"theme":"plugin"),"except"===a["".concat(N,"_option")]&&Object(l.c)(Object(l.a)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===N?"theme":"plugin")))},k=a(4),N=(a(615),a(34));function C(e,t){var a={};return["themes","plugins"].forEach(function(n,c){var l=e.local_site.site_details[n];"pull"===t&&(l=e.remote_site.site_details[n]);var i=[];for(var s in l){var r=l[s],o={name:r[0].name,active:r[0].active,path:r[0].path};i.push(o)}return a[n]=i}),a}var F=function(e){var t=C(e,e.current_migration.intent).themes;return S(e,{title:Object(l.a)("Theme Files","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},T=function(e){var t=C(e,e.current_migration.intent).plugins;return S(e,{title:Object(l.a)("Plugin Files","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})};t.default=Object(i.c)(function(e){var t=Object(k.f)("current_migration",e),a=Object(k.f)("local_site",e),n=Object(k.f)("remote_site",e),c=Object(N.a)("panelsOpen",e),l=Object(k.d)("stages",e),i=Object(k.g)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:a,remote_site:n,panelsOpen:c,stages:l,status:i}},{toggleThemePluginFiles:s.j,updateTPFOption:s.p,updateSelected:s.o,updateExcluded:s.m,togglePanelsOpen:v.l,addOpenPanel:v.c,removeOpenPanel:v.h,updateExcludes:s.n,kickOffTPFStage:s.g})(function(e){return c.a.createElement("div",{className:"theme-plugin-files"},c.a.createElement(F,e),c.a.createElement(T,e))})}}]);