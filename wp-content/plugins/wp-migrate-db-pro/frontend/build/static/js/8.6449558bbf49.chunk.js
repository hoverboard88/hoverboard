(this.webpackJSONPwpmdb=this.webpackJSONPwpmdb||[]).push([[8],{820:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),i=n.n(c),l=n(1),s=n(6),r=n(63),o=n(12),u=n(131),p=n.n(u),d=n(11),m=n.n(d),b=n(42),f=n(20),g=n.n(f),_=Object(s.c)(function(e){return{theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version}},{})(function(e){var t="",n=e.theme_plugin_files,a=e.panelsOpen,c=e.selected,s=e.items,r=e.type;if(!g()(a,r)&&n[r].enabled&&(t=e.summary,["other_files","muplugin_files"].includes(r))){if(0===c.length)return Object(l.a)("Empty Selection","wp-mograte-db");var o=[];s.forEach(function(e){c.includes(e.path)&&o.push(e.name)}),t=o.join(", ")}return i.a.createElement(i.a.Fragment,null,m()(t))}),h=n(671),O=n(102),v=n(314),j=n(137),E=function(e){var t=e.ariaLabel,n=e.optionChoices,a=e.type,c=e.value,l=Object(s.d)(),r=n,o=function(t){l(e.updateOption(t.target.value,a))},u=Object.keys(r).map(function(e){var t=a+"-"+e,n=c===e;return i.a.createElement("div",{key:e},i.a.createElement("input",{id:t,type:"radio",value:e,checked:n,onChange:o,name:a}),i.a.createElement("label",{htmlFor:t},m()(r[e])))});return i.a.createElement("div",{className:"radiogroup",role:"radiogroup","aria-label":t},u)},y=n(103),x=n(16),w=function(e,t,n){var a=[];if("object"===typeof t){var c=Object.values(t).map(function(e){return e[0].path});"selected"===n["".concat(e,"_option")]&&n["".concat(e,"_selected")].forEach(function(e){c.includes(e)&&a.push(e)}),"except"===n["".concat(e,"_option")]&&n["".concat(e,"_excluded")].forEach(function(e){c.includes(e)&&a.push(e)}),"active"===n["".concat(e,"_option")]&&Object.values(t).forEach(function(e){e[0].active&&a.push(e[0].path)}),"all"===n["".concat(e,"_option")]&&(a=c)}return a};var P=function(e,t){var n=e.theme_plugin_files,a=e.panelsOpen,u=e.current_migration,d=e.remote_site,f=e.local_site,g=u.status,P=u.intent,S=Object(v.b)(e),k=Object(s.d)(),N=t.title,C=t.type,F=t.panel_name,T=t.items,L=T.map(function(e){return e.path}),U=!1,M=P.charAt(0).toUpperCase()+P.slice(1),D={all:Object(l.c)(Object(l.a)("%s all %s","wp-migrate-db"),M,C),active:Object(l.c)(Object(l.a)("%s only active %s","wp-migrate-db"),M,C),selected:Object(l.c)(Object(l.a)("%s only selected %s","wp-migrate-db"),M,C),except:Object(l.c)(Object(l.a)("%s all %s <b>except</b> those selected","wp-migrate-db"),M,C)},I=function(e,t,n,a,c){var i=c.site_details,l=w(a,i[a],e);return{enabled:e["".concat(a.slice(0,-1),"_files")].enabled,isOpen:t.includes("".concat(a.slice(0,-1),"_files")),selected:l,selectionEmpty:p()(n,{name:"SELECTED_".concat(a.toUpperCase(),"_EMPTY")})}}(n,a,g,C,"pull"===P?d:f),J=I.enabled,V=I.isOpen,A=I.selected,Y=I.selectionEmpty;Object(c.useEffect)(function(){"select"===n["".concat(C,"_option")]&&k(e.updateSelected(A,C)),"except"===n["".concat(C,"_option")]&&e.updateExcluded(A,C)},[]),J&&!V&&(U=!0);var q=[],z="selected"===n["".concat(C,"_option")]||"except"===n["".concat(C,"_option")];U&&q.push("has-divider"),J&&q.push("enabled");var B={muplugins:Object(l.a)("Select any must-use plugins to be included in the migration.","wp-migrate-db"),others:Object(l.a)("Select any other files and folders found in the <code>wp-content</code> directory to be included in the migration.","wp-migrate-db")};return i.a.createElement(b.a,{title:N,className:q.join(" "),panelName:F,disabled:S,enabled:J,forceDivider:U,callback:function(t){return Object(j.c)(t,F,V,J,S,e.addOpenPanel,e.removeOpenPanel,function(){return k(Object(r.f)(F))})},toggle:Object(r.f)(F),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:i.a.createElement(_,Object(o.a)({},e,{disabled:S,items:T,selected:A,title:N,type:F,summary:D[n["".concat(C,"_option")]]}))},i.a.createElement("div",null,["others","muplugins"].includes(C)&&i.a.createElement("p",{className:"panel-instructions"},m()(B[C])),!["others","muplugins"].includes(C)&&i.a.createElement(E,{ariaLabel:Object(l.c)(Object(l.a)("%s options","wp-migrate-db"),C),optionChoices:D,intent:"push",type:C,value:n["".concat(C,"_option")],updateOption:r.l}),i.a.createElement(y.a,{id:"".concat(C,"-multiselect"),options:T,extraLabels:"",stateManager:function(t){"except"===n["".concat(C,"_option")]&&e.updateExcluded(t,C),e.updateSelected(t,C)},selected:A,visible:!0,disabled:!z,updateSelected:function(t){var a=t.map(function(e){return e.path});"except"===n["".concat(C,"_option")]?e.updateExcluded(a,C):e.updateSelected(a,C)},selectInverse:function(){return"except"===n["".concat(C,"_option")]?Object(O.a)(e.updateExcluded,L,A,C):Object(O.a)(e.updateSelected,L,A,C)},showOptions:z,type:C,themePluginOption:n["".concat(C,"_option")]})),i.a.createElement("div",{className:"excludes-wrap"},i.a.createElement(h.a,Object(o.a)({},e,{excludes:n["".concat(C,"_excludes")],excludesUpdater:e.updateExcludes,type:C}))),Y&&"selected"===n["".concat(C,"_option")]&&i.a.createElement(x.a,{type:"danger"},Object(l.c)(Object(l.a)("Please select at least one %s for migration","wp-migrate-db"),{themes:"theme",plugins:"plugin",muplugins:"must-use plugin",others:"file or directory"}[C])),Y&&"except"===n["".concat(C,"_option")]&&i.a.createElement(x.a,{type:"danger"},Object(l.c)(Object(l.a)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===C?"theme":"plugin")))},S=n(4),k=(n(625),n(35)),N=n(22);function C(e,t){var n={};return["themes","plugins","muplugins","others"].forEach(function(c,i){var l="pull"===t?e.remote_site.site_details[c]:e.local_site.site_details[c],s="pull"===t?e.local_site.site_details[c]:e.remote_site.site_details[c],r=l,o=[],u=function(e){if(s){var t=s[e];if(t&&t[0].hasOwnProperty("version"))return t[0].version}return null};for(var p in r){var d=r[p];if(d){var m={name:d[0].name,path:d[0].path};["plugins","themes"].includes(c)&&(m=Object(a.a)(Object(a.a)({},m),{},{active:d[0].active,sourceVersion:d[0].version,destinationVersion:u(p)})),o.push(m)}}return n[c]=o}),n}var F=function(e){var t=C(e,e.current_migration.intent).themes;return P(e,{title:Object(l.a)("Themes","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},T=function(e){var t=C(e,e.current_migration.intent).plugins;return P(e,{title:Object(l.a)("Plugins","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})},L=function(e){var t=C(e,e.current_migration.intent).muplugins;return 0===t.length?null:P(e,{title:Object(l.a)("Must-Use Plugins","wp-migrate-db"),type:"muplugins",panel_name:"muplugin_files",items:t})},U=function(e){var t=C(e,e.current_migration.intent).others;return 0===t.length?null:P(e,{title:Object(l.a)("Other Files","wp-migrate-db"),type:"others",panel_name:"other_files",items:t})};t.default=Object(s.c)(function(e){var t=Object(S.f)("current_migration",e),n=Object(S.f)("local_site",e),a=Object(S.f)("remote_site",e),c=Object(k.a)("panelsOpen",e),i=Object(S.d)("stages",e),l=Object(S.g)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:n,remote_site:a,panelsOpen:c,stages:i,status:l}},{toggleThemePluginFiles:r.f,updateTPFOption:r.l,updateSelected:r.k,updateExcluded:r.i,togglePanelsOpen:N.l,addOpenPanel:N.c,removeOpenPanel:N.h,updateExcludes:r.j,kickOffTPFStage:r.d})(function(e){return i.a.createElement("div",{className:"theme-plugin-files"},i.a.createElement(F,e),i.a.createElement(T,e),i.a.createElement(L,e),i.a.createElement(U,e))})}}]);