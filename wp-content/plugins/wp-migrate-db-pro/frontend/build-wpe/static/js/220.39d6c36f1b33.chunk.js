"use strict";(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[220],{72220:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var i=n(18489),l=n(4665),a=n(42233),r=n(62295),s=n(53273),c=n(79043),o=n(70659),u=n.n(o),p=n(75338),d=n(40795),m=n(12544),_=n.n(m),g=(0,r.$j)((function(e){return{theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version}}),{})((function(e){var t="",n=e.theme_plugin_files,i=e.panelsOpen,r=e.selected,s=e.items,c=e.type;if(!_()(i,c)&&(n[c]||{}).enabled){if(t=e.summary,["other_files","muplugin_files"].includes(c)){if(0===r.length)return l.createElement("span",{className:"empty-warning"},(0,a.__)("Empty selection","wp-migrate-db"));var o=[];s.forEach((function(e){r.includes(e.path)&&o.push(e.name)})),t=o.join(", ")}"core_files"===c&&(t=(0,a.__)("Export all Core files","wp-migrate-db"))}return l.createElement(l.Fragment,null,(0,p.ZP)(t))})),f=n(83135),h=n(18832),v=n(63708),b=n(98135),E=n(87439),w=n(78677),y=n(29214),x=n(29942),O=n(49275),P=function(e,t,n){var i=[];if("object"===typeof t){var l=Object.values(t).map((function(e){return e[0].path}));"selected"===n["".concat(e,"_option")]&&n["".concat(e,"_selected")].forEach((function(e){l.includes(e)&&i.push(e)})),"except"===n["".concat(e,"_option")]&&n["".concat(e,"_excluded")].forEach((function(e){l.includes(e)&&i.push(e)})),"active"===n["".concat(e,"_option")]&&Object.values(t).forEach((function(e){e[0].active&&i.push(e[0].path)})),"all"===n["".concat(e,"_option")]&&(i=l)}return i};var Z=function(e,t){var n=e.theme_plugin_files,i=e.panelsOpen,o=e.current_migration,m=e.remote_site,_=e.local_site,Z=o.status,S=o.intent,N=(0,v.p)(e),C=(0,r.I0)(),L=t.title,F=t.type,j=t.panel_name,k=t.items,B=function(){return"savefile"===S?k:k.filter((function(e){return!1===e.path.includes("wp-migrate-db")}))},I=k.map((function(e){return e.path})),T=!1,W={push:"Push",pull:"Pull",savefile:"Export"},R={all:(0,a.gB)((0,a.__)("%s all %s","wp-migrate-db"),W[S],F),active:(0,a.gB)((0,a.__)("%s only active %s","wp-migrate-db"),W[S],F),selected:(0,a.gB)((0,a.__)("%s only selected %s","wp-migrate-db"),W[S],F),except:(0,a.gB)((0,a.__)("%s all %s <b>except</b> those selected","wp-migrate-db"),W[S],F)},M=function(e,t,n,i,l){var a=l.site_details,r=P(i,a[i],e),s={themes:"theme_files",plugins:"plugin_files",muplugins:"muplugin_files",others:"other_files",core:"core_files"},c=(e[s[i]]||{}).enabled;return{enabled:void 0!==c&&c,isOpen:t.includes(s[i]),selected:r,selectionEmpty:u()(n,{name:"SELECTED_".concat(i.toUpperCase(),"_EMPTY")})}}(n,i,Z,F,"pull"===S?m:_),U=M.enabled,X=M.isOpen,D=M.selected,J=M.selectionEmpty;(0,l.useEffect)((function(){"select"===n["".concat(F,"_option")]&&C(e.updateSelected(D,F)),"except"===n["".concat(F,"_option")]&&e.updateExcluded(D,F)}),[]),U&&!X&&(T=!0);var V=[],$="selected"===n["".concat(F,"_option")]||"except"===n["".concat(F,"_option")];T&&V.push("has-divider"),U&&V.push("enabled");var A={muplugins:(0,a.__)("Select any must-use plugins to be included in the migration.","wp-migrate-db"),others:(0,a.__)("Select any other files and folders found in the <code>wp-content</code> directory to be included in the migration.","wp-migrate-db"),core:(0,a.__)("Including WordPress core files ensures that the exported archive contains the exact version of WordPress installed on this site, which is helpful when replicating the site in a new environment. ","wp-migrate-db")},G=(0,x.NR)(j,o,_,m);return l.createElement(d.Z,{title:L,className:V.join(" "),panelName:j,disabled:N,writable:G,enabled:U,forceDivider:T,callback:function(t){return(0,b.SF)(t,j,X,U,N,e.addOpenPanel,e.removeOpenPanel,(function(){return C((0,s.OL)(j))}))},toggle:(0,s.OL)(j),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:l.createElement(g,(0,c.Z)({},e,{disabled:N,items:B(),selected:D,title:L,type:j,summary:R[n["".concat(F,"_option")]]}))},l.createElement("div",null,["others","muplugins","core"].includes(F)&&l.createElement("p",{className:"panel-instructions"},(0,p.ZP)(A[F]),"core"===F&&l.createElement(O.Z,{link:"https://deliciousbrains.com/wp-migrate-db-pro/doc/full-site-exports/",content:(0,a.__)("Learn When to Include Core Files","wp-migrate-db"),utmContent:"wordpress-core-files-panel",utmCampaign:"wp-migrate-documentation",hasArrow:!0,anchorLink:"wordpress-core-files"})),!["others","muplugins","core"].includes(F)&&l.createElement(E.Z,{ariaLabel:(0,a.gB)((0,a.__)("%s options","wp-migrate-db"),F),optionChoices:R,intent:"push",type:F,value:n["".concat(F,"_option")],updateOption:s.WZ}),"core"!==F&&l.createElement(w.Z,{id:"".concat(F,"-multiselect"),options:B(),extraLabels:"",stateManager:function(t){"except"===n["".concat(F,"_option")]&&e.updateExcluded(t,F),e.updateSelected(t,F)},selected:D,visible:!0,disabled:!$,updateSelected:function(t){var i=t.map((function(e){return e.path}));"except"===n["".concat(F,"_option")]?e.updateExcluded(i,F):e.updateSelected(i,F)},selectInverse:function(){return"except"===n["".concat(F,"_option")]?(0,h.Z)(e.updateExcluded,I,D,F):(0,h.Z)(e.updateSelected,I,D,F)},showOptions:$,type:F,themePluginOption:n["".concat(F,"_option")]})),"core"!==F&&l.createElement("div",{className:"excludes-wrap"},l.createElement(f.Z,(0,c.Z)({},e,{excludes:n["".concat(F,"_excludes")],excludesUpdater:e.updateExcludes,type:F}))),J&&"selected"===n["".concat(F,"_option")]&&l.createElement(y.Z,{type:"danger"},(0,a.gB)((0,a.__)("Please select at least one %s for migration","wp-migrate-db"),{themes:"theme",plugins:"plugin",muplugins:"must-use plugin",others:"file or directory",core:"file or directory"}[F])),J&&"except"===n["".concat(F,"_option")]&&l.createElement(y.Z,{type:"danger"},(0,a.gB)((0,a.__)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===F?"theme":"plugin")))},S=n(4516),N=(n(22870),n(76178)),C=n(22633);function L(e,t){var n={};return["themes","plugins","muplugins","others","core"].forEach((function(l,a){var r="pull"===t?e.remote_site.site_details[l]:e.local_site.site_details[l],s="pull"===t||"savefile"===t?e.local_site.site_details[l]:e.remote_site.site_details[l],c=r,o=[],u=function(e){if(s){var t=s[e];if(t&&t[0].hasOwnProperty("version"))return t[0].version}return null};for(var p in c){var d=c[p];if(d){var m={name:d[0].name,path:d[0].path};["plugins","themes"].includes(l)&&"savefile"!==t&&(m=(0,i.Z)((0,i.Z)({},m),{},{active:d[0].active,sourceVersion:d[0].version,destinationVersion:u(p)})),o.push(m)}}return n[l]=o})),n}var F=function(e){var t=L(e,e.current_migration.intent).themes;return Z(e,{title:(0,a.__)("Themes","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},j=function(e){var t=L(e,e.current_migration.intent).plugins;return Z(e,{title:(0,a.__)("Plugins","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})},k=function(e){var t=L(e,e.current_migration.intent).muplugins;return 0===t.length?null:Z(e,{title:(0,a.__)("Must-Use Plugins","wp-migrate-db"),type:"muplugins",panel_name:"muplugin_files",items:t})},B=function(e){var t=L(e,e.current_migration.intent).others;return 0===t.length?null:Z(e,{title:(0,a.__)("Other Files","wp-migrate-db"),type:"others",panel_name:"other_files",items:t})},I=function(e){var t=e.current_migration.intent,n=L(e,t).core;return"savefile"!==t||0===n.length?null:Z(e,{title:(0,a.__)("WordPress Core Files","wp-migrate-db"),type:"core",panel_name:"core_files",items:n})},T=(0,r.$j)((function(e){var t=(0,S.NR)("current_migration",e),n=(0,S.NR)("local_site",e),i=(0,S.NR)("remote_site",e),l=(0,N.O)("panelsOpen",e),a=(0,S.r5)("stages",e),r=(0,S.xg)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:n,remote_site:i,panelsOpen:l,stages:a,status:r}}),{toggleThemePluginFiles:s.OL,updateTPFOption:s.WZ,updateSelected:s.pM,updateExcluded:s.RX,togglePanelsOpen:C.SO,addOpenPanel:C.LX,removeOpenPanel:C.I4,updateExcludes:s.KX,kickOffTPFStage:s.G_})((function(e){return l.createElement("div",{className:"theme-plugin-files"},l.createElement(F,e),l.createElement(j,e),l.createElement(k,e),l.createElement(B,e),l.createElement(I,e))}))}}]);