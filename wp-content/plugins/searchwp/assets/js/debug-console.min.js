!function(){"use strict";!function(e){const t={$el:{},settings:{startY:0,resizerHeight:0,minHeight:100,pinnedPanelKey:"swp-debug-panel-current",consoleHeightKey:"swp-debug-console-height"},init:()=>{e(t.ready)},ready:()=>{t.initElements(),t.initSettings(),t.registerEvents(),t.runActions()},initSettings:()=>{const n=e("#wpadminbar").length?e("#wpadminbar").outerHeight():0;t.settings.maxHeight=e(window).height()-n,t.settings.bodyMargin=t.$el.body.css("margin-bottom")},initElements:()=>{t.$el.body=e("body"),t.$el.debugConsole=e("#searchwp-debug-console-main")},registerEvents:()=>{e("#wp-admin-bar-searchwp-debug").on("click",t.openConsoleLinkClicked),e(".searchwp-console-close").on("click",t.closeConsoleLinkClicked),e(document).on("mousedown touchstart","#searchwp-console-header",t.resizeConsoleStart),e("#searchwp-console-panels-nav button").on("click",t.navItemClicked),e("#searchwp-console-panels-content a.swp-panel-link").on("click",t.navItemClicked)},runActions:()=>{t.showPinnedPanel()},openConsoleLinkClicked:e=>{e.preventDefault(),t.showPanel()},closeConsoleLinkClicked:()=>{t.$el.debugConsole.removeClass("swp-show").height("").width(""),t.$el.body.css("margin-bottom",""),localStorage.removeItem(t.settings.pinnedPanelKey)},navItemClicked:n=>{n.preventDefault();const s=e(n.target).attr("href")||e(n.target).attr("data-swp-href");t.showPanel(s)},resizeConsoleStart:n=>{2!==n.button&&(t.settings.resizerHeight=e(n.target).outerHeight()-1,t.settings.startY=t.$el.debugConsole.outerHeight()+(n.clientY||n.originalEvent.targetTouches[0].pageY),e(document).on("mousemove touchmove",t.resizeConsole),e(document).on("mouseup touchend",t.resizeConsoleStop))},resizeConsole:e=>{const n=t.settings.startY-e.clientY;n>=t.settings.resizerHeight&&n<=t.settings.maxHeight&&(t.$el.debugConsole.height(n),t.$el.body.css("margin-bottom","calc( "+t.settings.bodyMargin+" + "+n+"px )"))},resizeConsoleStop:()=>{e(document).off("mousemove touchmove",t.resizeConsole),e(document).off("mouseup touchend",t.resizeConsoleStop),localStorage.setItem(t.settings.consoleHeightKey,t.$el.debugConsole.height())},setConsoleHeight:()=>{let e=localStorage.getItem(t.settings.consoleHeightKey);e&&(e<t.settings.minHeight&&(e=t.settings.minHeight),t.$el.debugConsole.height(e))},selectMenuItem:n=>{const s=e("#searchwp-console-panels-nav");s.find("button").removeAttr("aria-selected"),s.find("li").removeClass("searchwp-panel-nav-current");const o=s.find('[data-swp-href="'+n+'"]').attr("aria-selected",!0);if(!o.length)return;const l=o.position().top-27,i=s.height();o.closest("#searchwp-console-panels-nav > ul > li").addClass("searchwp-panel-nav-current");const a=l>i,c=l<0,r=s.scrollTop();(a||c)&&s.scrollTop(l+r-i/2+o.outerHeight()/2),localStorage.setItem(t.settings.pinnedPanelKey,o.attr("data-swp-slug"))},showPanel:n=>{t.setConsoleHeight(),t.$el.body.css("margin-bottom","calc( "+t.settings.bodyMargin+" + "+t.$el.debugConsole.height()+"px )"),t.$el.debugConsole.addClass("swp-show"),e(".searchwp-panel-content").removeClass("searchwp-panel-content-show"),e("#searchwp-console-panels-content").scrollTop(0);let s=e(n);s.length||(s=e("#searchwp-console-panels-content .searchwp-panel-content").first(),n="#"+s.attr("id")),s.addClass("searchwp-panel-content-show").focus(),t.selectMenuItem(n)},showPinnedPanel:()=>{const n=localStorage.getItem(t.settings.pinnedPanelKey);if(!n)return;const s=e('[data-swp-slug="'+n+'"]');s.length?t.showPanel(s.attr("data-swp-href")):t.showPanel()}};t.init(),window.searchwp=window.searchwp||{},window.searchwp.debugConsole=t}(jQuery)}();
