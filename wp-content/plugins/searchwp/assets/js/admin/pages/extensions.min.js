!function(n){"use strict";const e={init:()=>{n(e.ready)},ready:()=>{e.events()},events:()=>{e.extensionSearchEvents(),e.extensionActionBtnEvents()},extensionSearchEvents:()=>{if(!n(".extensions-list-allowed").length)return;const e=new List("searchwp-extensions-list",{valueNames:["extension-name"]});n("#searchwp-admin-extensions-search").on("input",t=>{const s=n(t.currentTarget).val();e.search(s)})},extensionActionBtnEvents:()=>{n(".searchwp-extension-install").on("click",n=>{e.extensionActionBtnCallback("install",n)}),n(".searchwp-extension-activate").on("click",n=>{e.extensionActionBtnCallback("activate",n)}),n(".searchwp-extension-deactivate").on("click",n=>{e.extensionActionBtnCallback("deactivate",n)})},extensionActionBtnCallback:(t,s)=>{s.preventDefault(),s.stopImmediatePropagation();const i={$btn:n(s.currentTarget)};if(i.$btn.hasClass("disabled"))return;i.$action=i.$btn.closest(".extension-action"),i.$actions=i.$btn.closest(".extension-actions"),i.$buttonText=i.$btn.find(".extension-action-button-text"),i.$buttonSpinner=i.$btn.find(".fa-spinner");const o={install:`${_SEARCHWP.prefix}extension_install`,activate:`${_SEARCHWP.prefix}extension_activate`,deactivate:`${_SEARCHWP.prefix}extension_deactivate`};t in o&&(i.$btn.addClass("disabled"),i.$buttonText.hide(),i.$buttonSpinner.show(),n.post(ajaxurl,{action:o[t],_ajax_nonce:_SEARCHWP.nonce,extension_slug:i.$btn.data("extension-slug")},n=>{e.extensionActionBtnProcessResponse(n,i)}))},extensionActionBtnProcessResponse:(n,t)=>{n.success?e.extensionActionBtnProcessResponseSuccess(n,t):e.extensionActionBtnProcessResponseFail(n,t)},extensionActionBtnProcessResponseSuccess:(n,e)=>{"object"==typeof n.data&&e.$action.append('<div class="msg success">'+n.data.msg+"</div>"),setTimeout(()=>{e.$buttonText.show(),e.$buttonSpinner.hide(),e.$btn.removeClass("disabled"),e.$action.find(".msg").remove(),e.$action.hide(),e.$actions.find(`.extension-action-${n.data.show_action}`).show()},3e3)},extensionActionBtnProcessResponseFail:(n,e)=>{"object"==typeof n.data?e.$action.append('<div class="msg error">'+_SEARCHWP.error_strings.extension_error+"</div>"):e.$action.append('<div class="msg error">'+n.data+"</div>"),setTimeout(()=>{e.$buttonText.show(),e.$buttonSpinner.hide(),e.$btn.removeClass("disabled"),e.$action.find(".msg").remove()},3e3)}};e.init(),window.searchwp=window.searchwp||{},window.searchwp.AdminExtensionsPage=e}(jQuery);