"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[4688,5394,6124,7199,9702],{52636:function(t,e,n){n.r(e);var i=n(97867),o=n(59092),r=n(25696),a=n(19006);e.default=function(t){var e=(0,o.default)((function(t){return t.integrationsFlyoutState})),n={className:"gravitysmtp-settings-app__integrations-flyout"};return i.React.createElement("div",n,function(){switch(null==e?void 0:e.screen){case 1:default:return i.React.createElement(r.default,t);case 2:return i.React.createElement(a.default,t)}}())}},25696:function(t,e,n){n.r(e);var i=n(18134),o=n(8140),r=n(97867),a=n(78327),c=n(80509),s=n(29549),u=n(5529),l=n(25787),d=n(87029),p=n(66598),g=n(2489),f=n(55809),m=n(59092),v=r.React.useState,b=r.React.useMemo,y=r.React.useCallback;e.default=function(t){var e,n=t.i18n,_=void 0===n?{}:n,A=(0,m.default)((function(t){return t.integrations})),h=(0,m.default)((function(t){return t.updateIntegrationsFlyoutState})),k=(0,m.default)((function(t){return t.setActiveIntegrationId})),O=v(""),C=(0,o.A)(O,2),S=C[0],E=C[1],w=(null==_||null===(e=_.integrations)||void 0===e||null===(e=e.flyout)||void 0===e?void 0:e.screen01)||{},D=w.heading,I=void 0===D?"":D,j=w.description,P=void 0===j?"":j,R=w.search_placeholder,x=void 0===R?"":R,F=w.search_label,L=void 0===F?"":F,z=b((function(){return A.filter((function(t){var e;return!(null!==(e=t.data)&&void 0!==e&&e.enabled)}))}),[A]),T=b((function(){return(0,i.A)(z).sort((function(t,e){return t.title.localeCompare(e.title)}))}),[z]),N=b((function(){return function(t,e){if(!e)return t;var n=e.toLowerCase();return t.filter((function(t){return t.id.toLowerCase().includes(n)||t.title.toLowerCase().includes(n)}))}(T,S)}),[T,S]),B=b((function(){return{className:(0,r.classnames)({"gravitysmtp-settings-app__integrations-flyout--screen-01":!0})}}),[]),M=y((function(t){E(t)}),[]),J=y((function(t){h({screen:2}),k(t)}),[h,k]),W=y((function(t){var e=f["".concat(t.logo,"Logo")]||f.BrokenImage,n="integrations-flyout-card-title-".concat(t.id),i="integrations-flyout-card-description-".concat(t.id);return r.React.createElement(s.A,{item:!0,key:"integration-".concat(t.id),customClasses:{"gravitysmtp-settings-app__integrations-flyout-card-grid-item":!0},customAttributes:{"data-test-id":"integration-card-".concat(t.id)},type:"fluid",width:12},r.React.createElement(c.A,{type:"white",customClasses:["gravitysmtp-settings-app__integrations-flyout-card-button"],customAttributes:{"data-test-id":"integrations-flyout-card-button-".concat(t.id),"aria-labelledby":n,"aria-describedby":i},onClick:function(){return J(t.id)}}),r.React.createElement(g.A,{contentAttributes:{spacing:[0,0,0,3]},count:t.description,countAttributes:{color:"comet",customAttributes:{id:i},size:"text-xs",weight:"regular"},customClasses:["gravitysmtp-settings-app__integrations-flyout-card"],customIcon:r.React.createElement(e,{height:48,width:48}),title:t.title,titleAttributes:{customAttributes:{id:n},spacing:2,size:"text-sm",tagName:"h3",weight:"medium"}}))}),[J]);return r.React.createElement("div",B,r.React.createElement(u.A,{content:I,size:"display-xs",spacing:3,tagName:"h2",weight:"semibold"}),r.React.createElement(p.A,{color:"comet",size:"text-sm",spacing:6},r.React.createElement(a.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:P,tokens:[{component:d.A,key:"suggest_link",props:{href:"https://roadmap.smtp.gravity.com/",target:"_blank"}}]})),r.React.createElement(l.A,{labelAttributes:{customClasses:["gform-visually-hidden"],label:L},placeholder:x,spacing:4,value:S,onChange:M}),r.React.createElement(s.A,{container:!0,wrap:!0,customClasses:["gravitysmtp-settings-app__integrations-flyout-card-grid"],justifyContent:"flex-start",rowSpacing:4},N.map(W)))}},19006:function(t,e,n){n.r(e),n.d(e,{default:function(){return F}});var i=n(71860),o=n(88856),r=n(90455),a=n(8140),c=n(78564),s=n.n(c),u=n(27122),l=n.n(u),d=n(97867),p=n(60177),g=n(21713),f=n(80509),m=n(5529),v=n(55899),b=n(84860),y=n(28099),_=n(83707),A=function(t){var e,n;return null!==(e=null===(n=t.find((function(t){var e;return null===(e=t.data)||void 0===e?void 0:e.is_primary})))||void 0===n?void 0:n.id)&&void 0!==e?e:""},h=n(93313),k=n(53015);function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,a.A)(t,1)[0];return!(0,k.A)("".concat(e,"_").concat(n))})))}var C=n(55809),S=n(46716),E=n(59092);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){(0,o.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=d.React.useCallback,j=d.React.useEffect,P=d.React.useState,R=d.React.useRef,x=function(t){var e,n,o,c,u,k=t.common,w=void 0===k?{}:k,x=t.data,F=void 0===x?{}:x,L=t.i18n,z=void 0===L?{}:L,T=(null==z?void 0:z.integrations)||{},N=T.integration_settings_error,B=T.flyout,M=(void 0===B?{}:B).screen02,J=void 0===M?{}:M,W=J.back_button_label,G=void 0===W?"":W,H=J.save_button_label,X=void 0===H?"":H,U=J.save_enable_button_label,Y=void 0===U?"":U,Z=(null==w?void 0:w.i18n)||{},q=Z.debug_messages,K=void 0===q?{}:q,Q=K.saving_integration_settings,V=void 0===Q?"":Q,$=K.saving_integration_settings_error,tt=void 0===$?"":$,et=Z.snackbar_api_save_success,nt=void 0===et?"":et,it=Z.snackbar_api_save_integration_enabled,ot=void 0===it?"":it,rt=(0,E.default)((function(t){return t.activeIntegrationId})),at=(0,E.default)((function(t){return t.integrationsFlyoutState})),ct=(0,E.default)((function(t){return t.integrationSettingsFormData})),st=(0,E.default)((function(t){return t.integrations})),ut=P(!1),lt=(0,a.A)(ut,2),dt=lt[0],pt=lt[1],gt=R(null),ft=(0,E.default)((function(t){return t.setSettingsFlyoutClosed})),mt=(0,E.default)((function(t){return t.updateIntegrationsFlyoutState})),vt=(0,E.default)((function(t){return t.updateIntegrationStatus})),bt=(0,E.default)((function(t){return t.setIntegrationSettingsFormData})),yt=I((function(t,e){return bt(rt,t,e)}),[rt,bt]),_t=(0,g.uN)(F,"id",rt),At=(null==_t||null===(e=_t.settings)||void 0===e?void 0:e.fields)||[],ht=(null==w||null===(n=w.endpoints)||void 0===n||null===(n=n.save_connector_settings)||void 0===n?void 0:n.action)||"",kt=(null==w||null===(o=w.endpoints)||void 0===o||null===(o=o.save_connector_settings)||void 0===o?void 0:o.nonce)||"",Ot=(0,b.dh)(),Ct=(null==_t||null===(c=_t.settings)||void 0===c?void 0:c.hide_save)||!1,St=(null===(u=ct[rt])||void 0===u?void 0:u.from_email)||"";j((function(){St||yt("force_from_email",!1)}),[St,yt]);var Et=function(){var t=(0,r.A)(s().mark((function t(){var e,n,i,o,r,a,c,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!=gt&&gt.current&&(e=gt.current.offsetWidth,gt.current.style.width="".concat(e,"px")),pt(!0),n={action:ht,security:kt,settings:O(ct[rt],rt),connector_type:rt},t.next=5,(0,_.A)((0,g.nv)(V,rt,JSON.stringify((0,h.A)(["api_key","api_secret","server_api_token","password","security"],n))),"info");case 5:return t.prev=5,t.next=8,(0,p.bE)({endpoint:l(),body:n});case 8:null!=(o=t.sent)&&null!==(i=o.data)&&void 0!==i&&i.success?(r=D({configured:!0,enabled:!0},""===A(st)&&{is_primary:!0}),Ot("add"===at.action?(0,g.nv)(ot,_t.title):nt),vt(rt,r),(0,S.saveActivationState)(rt,ht,kt,r),setTimeout((function(){ft()}),1e3)):(u=(0,g.Fh)(null==o||null===(a=o.error)||void 0===a||null===(a=a.detail)||void 0===a?void 0:a.data)?JSON.parse(null==o||null===(c=o.error)||void 0===c||null===(c=c.detail)||void 0===c?void 0:c.data):"",Ot((null==u?void 0:u.data)||N,"error")),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,(0,_.A)((0,g.nv)(tt,rt,JSON.stringify(t.t0)),"error");case 16:case 17:pt(!1),null!=gt&&gt.current&&(gt.current.style.width="");case 19:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(){return t.apply(this,arguments)}}(),wt={size:"size-height-l",type:"white",label:G,onClick:function(){mt({screen:1})}},Dt={activeType:"loader",active:dt,customAttributes:{"data-test-id":"integration-settings-save-button"},customClasses:(0,d.classnames)({"gravitysmtp-integration-settings__save":!0,"gravitysmtp-integration-settings__save--saving":dt}),icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:"add"===at.action?Y:X,size:"size-height-l",type:"primary-new",onClick:Et},It={className:(0,d.classnames)({"gravitysmtp-settings-app__integrations-flyout":!0})},jt=(0,y.A)(At,{activeIntegrationId:rt,integrationSettingsFormData:ct,saveConnectorSettings:Et,savingSettings:dt,Svgs:C,i18n:null==w?void 0:w.i18n,addSnackBarMessage:Ot});return d.React.createElement("div",It,d.React.createElement(m.A,{content:_t.settings.title,size:"display-xs",spacing:3,tagName:"h2",weight:"semibold"}),d.React.createElement("form",{id:rt},d.React.createElement(v.A,{id:rt,fields:jt,setFieldData:yt})),d.React.createElement("footer",{className:"gform-flyout__footer"},d.React.createElement("div",{className:"gform-flyout__footer-right"},"add"===at.action&&d.React.createElement(f.A,wt),!Ct&&d.React.createElement(f.A,(0,i.A)({},Dt,{ref:gt})))))};x.propTypes={common:d.PropTypes.object,data:d.PropTypes.object,i18n:d.PropTypes.object};var F=x},46716:function(t,e,n){n.r(e),n.d(e,{deactivateIntegrations:function(){return T},saveActivationState:function(){return N}});var i,o=n(71860),r=n(88856),a=n(27122),c=n.n(a),s=n(40450),u=n.n(s),l=n(97867),d=n(21713),p=n(60177),g=n(55809),f=n(30242),m=n(80509),v=n(29549),b=n(5529),y=n(80371),_=n(66598),A=n(99270),h=n(4842),k=n(46492),O=n(60661),C=n(84860),S=n(52636),E=n(83707),w=n(93313),D=n(59092);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){(0,r.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=(null===(i=(0,d.zj)(u(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{},R=l.React.forwardRef,x=l.React.memo,F=l.React.useCallback,L=l.React.useMemo,z=x((function(t){var e,n,i=t.actionItems,o=void 0===i?[]:i,r=t.common,a=void 0===r?{}:r,c=t.data,s=void 0===c?{}:c,u=t.integration,p=void 0===u?{}:u,g=t.i18n,f=void 0===g?{}:g,m=(0,D.default)((function(t){return t.integrations})),v=(0,D.default)((function(t){return t.setActiveIntegrationId})),b=(0,D.default)((function(t){return t.setConfirmDialogOpen})),y=(0,D.default)((function(t){return t.setConfirmDialogSettings})),_=(0,D.default)((function(t){return t.setIntegrationSettingsFormData})),h=(0,D.default)((function(t){return t.setIntegrationsFlyoutState})),k=(0,D.default)((function(t){return t.setSettingsFlyout})),O=(0,D.default)((function(t){return t.updateIntegrationStatus})),E=(null==a||null===(e=a.endpoints)||void 0===e||null===(e=e.save_connector_settings)||void 0===e?void 0:e.action)||"",w=(null==a||null===(n=a.endpoints)||void 0===n||null===(n=n.save_connector_settings)||void 0===n?void 0:n.nonce)||"",I=(0,C.dh)(),P=s.primary_locked,R=s.backup_locked,x=(null==f?void 0:f.integrations)||{},F=x.primary_disabled_heading,L=x.primary_disabled_content,z=x.integration_disabled,B=o.map((function(t){var e,n,i;if("button"===t.props.element&&"edit"===t.key)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{onClick:function(){v(p.id),h({screen:2,action:"edit"}),k({closeOnMaskClick:!1,isOpen:!0,onClose:function(){return k({isOpen:!1})}},l.React.createElement(S.default,{common:a,data:s,i18n:f}))}})})});if("button"===t.props.element&&"remove"===t.key)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{"data-test-id":"integration-settings-dropdown-item-".concat(p.id,"-remove"),onClick:function(){if(p.data.is_primary){var t=function(){b(!1)};y({confirmDialogCustomAttributes:{showCancelButton:!1},confirmDialogI18n:{confirm_change_content:L,confirm_change_heading:F},confirmDialogOpen:!0,confirmDialogOnClose:t,confirmDialogOnConfirm:t})}var e={enabled:!1,is_primary:!1,is_backup:!1};N(p.id,E,w,e).then((function(){_(p.id,"enabled",!1),_(p.id,"is_primary",!1),_(p.id,"is_backup",!1),O(p.id,e),I((0,d.nv)(z,p.title))}))}})})});if("set-as-primary"===t.key&&P||"set-as-backup"===t.key&&R)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{disabled:!0})})});if(null!=p&&null!==(e=p.data)&&void 0!==e&&e.configured){var o;if("link"===t.props.element&&"send-a-test"===t.key)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{href:"".concat((null===(o=t.props.customAttributes)||void 0===o?void 0:o.href)||"","&integration=").concat(p.id)})})});var r=function(){};switch(t.key){case"set-as-primary":r=function(){N(p.id,E,w,{enabled:!0,is_primary:!0,is_backup:!1}).then((function(){_(p.id,"is_primary",!0),_(p.id,"is_backup",!1),O(p.id,{enabled:!0,is_primary:!0,is_backup:!1}),I((0,d.nv)(f.integrations.set_primary_integration,p.title)),T(m,"is_primary",O,p.id,E,w)}))};break;case"set-as-backup":r=function(){N(p.id,E,w,{enabled:!0,is_primary:!1,is_backup:!0}).then((function(){_(p.id,"is_primary",!1),_(p.id,"is_backup",!0),O(p.id,{enabled:!0,is_backup:!0,is_primary:!1}),I((0,d.nv)(f.integrations.set_backup_integration,p.title)),T(m,"is_backup",O,p.id,E,w)}))}}return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{"data-test-id":"integration-settings-dropdown-item-".concat(p.id,"-").concat(t.key),onClick:r})})})}return"send-a-test"===t.key?j(j({},t),{},{props:j(j({},(null==t?void 0:t.props)||{}),{},{element:"button",customAttributes:j(j({},(null==t||null===(i=t.props)||void 0===i?void 0:i.customAttributes)||{}),{},{disabled:!0})})}):j(j({},t),{},{props:j(j({},(null==t?void 0:t.props)||{}),{},{customAttributes:j(j({},(null==t||null===(n=t.props)||void 0===n?void 0:n.customAttributes)||{}),{},{disabled:!0})})})}));return l.React.createElement(A.Ay,{align:"right",closeOnClick:!0,listItems:B,triggerAttributes:{ariaId:"".concat(p.id,"-aria-labelledby"),ariaText:f.integrations.card_more_settings,customAttributes:{"data-test-id":"integration-settings-dropdown-trigger-".concat(p.id)},iconPrefix:"gravitysmtp-admin-icon",icon:"dots-horizontal",id:"".concat(p.id,"-trigger"),size:"size-height-s",type:"icon-grey"},width:192})})),T=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(a){var c;a.id!==n&&!0!==(null==a||null===(c=a.data)||void 0===c?void 0:c.disabled)&&!1!==(null==a?void 0:a.data[t])&&(N(a.id,i,o,(0,r.A)({},t,!1)),e(a.id,(0,r.A)({},t,!1)))}))},N=function(t,e,n,i){var o=i.activated,r=i.configured,a=i.enabled,s=i.is_primary,u=i.is_backup,l=P.i18n,g=(void 0===l?{}:l).debug_messages,f=void 0===g?{}:g,m=f.saving_integration_settings,v=void 0===m?"":m,b=f.saving_integration_settings_error,y=void 0===b?"":b,_={action:e,security:n,connector_type:t,settings:j(j(j(j(j({},void 0!==o&&{activated:o}),void 0!==r&&{configured:r}),void 0!==a&&{enabled:a}),void 0!==s&&{is_primary:s}),void 0!==u&&{is_backup:u})};return(0,E.A)((0,d.nv)(v,t,JSON.stringify((0,w.A)(["security"],_))),"info"),(0,p.bE)({endpoint:c(),body:_}).then((function(t){return t})).catch((function(e){throw(0,E.A)((0,d.nv)(y,t,JSON.stringify(e)),"error"),e}))},B=x((function(t){var e=t.common,n=t.data,i=t.i18n,o=t.integration,r=t.actionItems,a=t.caps,c=(0,D.default)((function(t){return t.setActiveIntegrationId})),s=(0,D.default)((function(t){return t.setIntegrationsFlyoutState})),u=(0,D.default)((function(t){return t.setSettingsFlyout})),d=n.primary_locked,p=n.backup_locked,v=L((function(){return l.React.createElement(b.A,{customClasses:["gform-card__top-container-heading"],tagName:"h3",content:o.title,size:"text-md",weight:"medium"})}),[o.title]),A=L((function(){var t={content:e.i18n.setting_locked,icon:"lock",iconPrefix:"gravitysmtp-admin-icon",iconPreset:"status-locked",maxWidth:300,position:"right",spacing:[0,0,0,2],tagName:"span",theme:"port"};return o.data.is_primary?l.React.createElement(f.A,{customClasses:["gform-card__top-container-badge"],display:"flex"},l.React.createElement(y.A,{content:i.integrations.card_primary.toUpperCase(),size:"text-xxs",spacing:[0,0,0,2],type:"blue"}),d&&l.React.createElement(h.A,t)):o.data.is_backup?l.React.createElement(f.A,{customClasses:["gform-card__top-container-badge"],display:"flex"},l.React.createElement(y.A,{content:i.integrations.card_backup.toUpperCase(),size:"text-xxs",spacing:[0,0,0,2],type:"upgrade"}),p&&l.React.createElement(h.A,t)):null}),[e.i18n.setting_locked,o.data.is_primary,o.data.is_backup,i.integrations.card_primary,i.integrations.card_backup,d,p]),k=L((function(){return l.React.createElement(_.A,{customClasses:["gform-card__top-container-description"],color:"comet",size:"text-sm"},o.description)}),[o.description]),C=L((function(){return g["".concat(o.logo,"Logo")]||g.BrokenImage}),[o.logo]),E=l.React.createElement(C,null),w=F((function(){c(o.id),s({screen:2,action:"edit"}),u({closeOnMaskClick:!1,isOpen:!0,onClose:function(){return u({isOpen:!1})}},l.React.createElement(S.default,{common:e,data:n,i18n:i}))}),[c,o.id,s,u,e,n,i]),I=[E];I.push(A);var j=((null==i?void 0:i.integrations)||{}).card_settings,P=l.React.createElement(m.A,{customClasses:["gform-card__top-container-settings-button"],icon:"cog",customAttributes:{"data-test-id":"integration-settings-button-".concat(o.id)},iconPrefix:"gravitysmtp-admin-icon",label:j,onClick:w,size:"size-height-s",type:"icon-white",disabled:!a.gravitysmtp_edit_integrations}),R=l.React.createElement(f.A,{customClasses:["gform-card__top-container-buttons"],display:"flex"},P,l.React.createElement(z,{actionItems:r,common:e,data:n,integration:o,i18n:i}));return I.push(R),l.React.createElement(O.A,{customClasses:["gravitysmtp-settings-app__integration-card"],title:v,description:k,headerContent:I,disabled:o.data.disabled})})),M=R((function(t,e){var n=t.customAttributes,i=void 0===n?{}:n,r=t.customClasses,a=void 0===r?[]:r,c=t.common,s=void 0===c?{}:c,u=t.data,p=void 0===u?{}:u,g=t.i18n,m=void 0===g?{}:g,y=(0,D.default)((function(t){return t.integrations})),A=(0,D.default)((function(t){return t.setIntegrationsFlyoutState})),h=(0,D.default)((function(t){return t.setSettingsFlyout})),O=j({className:(0,l.classnames)({"gravitysmtp-settings-app__integrations":!0},a),"data-test-id":"settings-integrations-screen"},i),C=(null==m?void 0:m.integrations)||{},E=C.top_heading,w=C.top_content,I=(null==p?void 0:p.integrations_actions)||[],P=(null==p?void 0:p.caps)||{};return l.React.createElement("div",(0,o.A)({},O,{ref:e}),l.React.createElement(b.A,{size:"display-sm",weight:"semibold",spacing:1,content:E}),l.React.createElement(_.A,{content:w,size:"text-sm",color:"comet",spacing:6}),!!y.length&&P.gravitysmtp_view_integrations&&l.React.createElement(f.A,{spacing:6},l.React.createElement(v.A,{container:!0,wrap:!0,customClasses:["gravitysmtp-settings-app__integration-card-grid"],alignItems:"stretch",justifyContent:"flex-start",columnSpacing:5,rowSpacing:6},l.React.createElement(v.A,{item:!0,customClasses:["gravitysmtp-settings-app__integration-card-grid-item","gravitysmtp-settings-app__integration-card-grid-item--add-item"],customAttributes:{"data-test-id":"integration-card-add-item"}},l.React.createElement(k.A,{buttonAttributes:{customAttributes:{"data-test-id":"integration-card-add-item-button"}},buttonClasses:["gform-card-add__button"],onClick:function(){A({screen:1,action:"add"}),h({closeOnMaskClick:!1,isOpen:!0,onClose:function(){return h({isOpen:!1})}},l.React.createElement(S.default,{common:s,data:p,i18n:m}))}})),y.map((function(t){var e,n;return null!=t&&null!==(e=t.data)&&void 0!==e&&e.disabled||null==t||null===(n=t.data)||void 0===n||!n.enabled?null:l.React.createElement(v.A,{item:!0,key:"integrations-".concat((0,d.Yv)(t.title)),customClasses:["gravitysmtp-settings-app__integration-card-grid-item","gravitysmtp-settings-app__integration-card-grid-item--".concat((0,d.Yv)(t.title))],customAttributes:{"data-test-id":"integration-card-".concat(t.id)}},l.React.createElement(B,{common:s,data:p,i18n:m,integration:t,actionItems:I,caps:P}))})))))}));M.propTypes={customAttributes:l.PropTypes.object,customClasses:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.array,l.PropTypes.object]),common:l.PropTypes.object,data:l.PropTypes.object,i18n:l.PropTypes.object},M.displayName="IntegrationsScreen",e.default=M},59092:function(t,e,n){n.r(e);var i,o,r,a,c,s,u,l=n(88856),d=n(40450),p=n.n(d),g=n(97867),f=n(78327),m=n(21713);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,l.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y,_,A,h,k=(null===(i=(0,m.zj)(p(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},O=(null===(o=(0,m.zj)(p(),"gravitysmtp_admin_config"))||void 0===o?void 0:o.common)||{},C={activeIntegrationId:(h=null==k||null===(A=k.data)||void 0===A||null===(A=A.integrations)||void 0===A?void 0:A.find((function(t){var e;return null==t||null===(e=t.data)||void 0===e?void 0:e.enabled})),(null==h?void 0:h.id)||""),confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnClose:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",debugLogEnabled:(null==O||null===(r=O.data)||void 0===r?void 0:r.debug_log_enabled)||!1,notificationsEmailDigestEnabled:(null==k||null===(a=k.data)||void 0===a?void 0:a.notifications_settings.email_digest_enabled)||!1,experimentalFeatures:(null==O||null===(c=O.data)||void 0===c?void 0:c.experimental_features)||{},integrations:(null==k||null===(s=k.data)||void 0===s?void 0:s.integrations)||[],integrationsFlyoutState:{screen:1},integrationSettingsFormData:(_={},null==k||null===(y=k.data)||void 0===y||null===(y=y.integrations)||void 0===y||y.forEach((function(t){_[t.id]=(null==t?void 0:t.data)||{}})),_),noticeDialogOpen:!1,pageLoaderActive:!1,settingsFlyoutChildren:null,settingsFlyoutProps:{},settingsNavBlocked:!1,testModeEnabled:(null==O||null===(u=O.data)||void 0===u?void 0:u.test_mode_enabled)||!1},S=(0,f.vt)(C,(function(t){return{setActiveIntegrationId:function(e){return t((function(){return{activeIntegrationId:e}}))},setConfirmDialogOpen:function(e){return t((function(){return{confirmDialogOpen:e}}))},setConfirmDialogSettings:function(e){var n=e.confirmDialogCustomAttributes,i=void 0===n?{}:n,o=e.confirmDialogI18n,r=void 0===o?{}:o,a=e.confirmDialogOpen,c=void 0!==a&&a,s=e.confirmDialogOnCancel,u=void 0===s?function(){}:s,l=e.confirmDialogOnClose,d=void 0===l?function(){}:l,p=e.confirmDialogOnConfirm,g=void 0===p?function(){}:p,f=e.confirmDialogConfirmButtonType,m=void 0===f?"primary-new":f;t((function(){return{confirmDialogCustomAttributes:i,confirmDialogConfirmButtonType:m,confirmDialogI18n:r,confirmDialogOpen:c,confirmDialogOnCancel:u,confirmDialogOnClose:d,confirmDialogOnConfirm:g}}))},setExperimentalFeatures:function(e,n){return t((function(t){return{experimentalFeatures:b(b({},t.experimentalFeatures),{},(0,l.A)({},e,n))}}))},setIntegrationsFlyoutState:function(e){return t((function(){return{integrationsFlyoutState:e}}))},setNoticeDialogOpen:function(e){return t((function(){return{noticeDialogOpen:e}}))},setNotificationsEmailDigestEnabled:function(e){return t((function(){return{notificationsEmailDigestEnabled:e}}))},setPageLoaderActive:function(e){return t((function(){return{pageLoaderActive:e}}))},setIntegrationSettingsFormData:function(e,n,i){return t((0,g.immer)((function(t){t.integrationSettingsFormData[e]||(t.integrationSettingsFormData[e]={}),t.integrationSettingsFormData[e][n]=i})))},setDebugLogEnabled:function(e){return t((function(){return{debugLogEnabled:e}}))},setSettingsFlyout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return t((function(t){return{settingsFlyoutProps:e,settingsFlyoutChildren:void 0===n?t.settingsFlyoutChildren:n}}))},setSettingsFlyoutClosed:function(){return t((function(t){return{settingsFlyoutProps:b(b({},t.settingsFlyoutProps),{},{isOpen:!1})}}))},setSettingsNavBlocked:function(e){return t((function(){return{settingsNavBlocked:e}}))},setTestModeEnabled:function(e){return t((function(){return{testModeEnabled:e}}))},updateIntegrationsFlyoutState:function(e){return t((function(t){return{integrationsFlyoutState:b(b({},t.integrationsFlyoutState),e)}}))},updateIntegrationStatus:function(e,n){var i=n.activated,o=n.configured,r=n.enabled,a=n.is_primary,c=n.is_backup;return t((0,g.immer)((function(t){var n=t.integrations.find((function(t){return t.id===e}));n&&(n.data||(n.data={}),void 0!==i&&(n.data.activated=i),void 0!==o&&(n.data.configured=o),void 0!==r&&(n.data.enabled=r),void 0!==a&&(n.data.is_primary=a),void 0!==c&&(n.data.is_backup=c))})))},updateSettingsFlyoutProps:function(e){return t((function(t){return{settingsFlyoutProps:b(b({},t.settingsFlyoutProps),e)}}))}}}));e.default=S},55809:function(t,e,n){n.r(e),n.d(e,{AmazonAWSLogo:function(){return i.A},BrevoLogo:function(){return o.A},BrokenImage:function(){return r.A},CustomSMTPLogo:function(){return a.A},ElasticEmailLogo:function(){return c.A},EmailitLogo:function(){return s.A},GoogleAltLogo:function(){return u.A},GoogleLogo:function(){return l.A},MailchimpLogo:function(){return d.A},MailerSendLogo:function(){return p.A},MailgunLogo:function(){return g.A},MailjetLogo:function(){return f.A},MandrillLogo:function(){return m.A},MicrosoftAltLogo:function(){return v.A},MicrosoftLogo:function(){return b.A},PHPLogo:function(){return y.A},PostmarkLogo:function(){return _.A},ResendLogo:function(){return A.A},SMTP2GOLogo:function(){return O.A},SendGridLogo:function(){return h.A},SlackLogo:function(){return k.A},SparkPostLogo:function(){return C.A},TelegramLogo:function(){return S.A},TwilioLogo:function(){return E.A},WhatsAppLogo:function(){return w.A},WordPressLogo:function(){return D.A},ZohoAltLogo:function(){return j},ZohoLogo:function(){return I.A}});var i=n(80403),o=n(53214),r=n(79543),a=n(26220),c=n(74685),s=n(89667),u=n(63660),l=n(80419),d=n(8524),p=n(6682),g=n(73437),f=n(87504),m=n(49501),v=n(40783),b=n(55582),y=n(814),_=n(10503),A=n(52071),h=n(83654),k=n(15034),O=n(68694),C=n(14945),S=n(23203),E=n(6560),w=n(73650),D=n(84173),I=n(64158),j=I.A},28099:function(t,e,n){var i=n(90455),o=n(88856),r=n(78564),a=n.n(r),c=n(97867),s=n(63662),u=n(12094),l=n(87029),d=n(25787),p=n(66598),g=n(21713),f=n(78327),m=n(27764);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,o.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function(t,e){return t.map((function(t){var n,i;if(null==t||null===(n=t.props)||void 0===n||!n.name)return t;var o="".concat(e,"_").concat(t.props.name),r=(null==t||null===(i=t.props)||void 0===i?void 0:i.labelAttributes)||{};return b(b({},t),{},{props:b(b({},t.props),{},{labelAttributes:b(b({},r),(0,m.A)(o))})})}))},_=function(t,e){var n=e.integrationSettingsFormData[e.activeIntegrationId],i=null==n?void 0:n.from_email;return t.map((function(t){var e;if("force_from_email"!==(null==t||null===(e=t.props)||void 0===e?void 0:e.name))return t;var o=b(b({},t),{},{props:b(b({},t.props),{},{externalControl:!0,externalChecked:null==n?void 0:n.force_from_email})});return i&&/\S+@\S+\.\S+/.test(i)||(o.props.disabled=!0),o}))},A=function(t,e){return t.map((function(t,n){var i;if(0!==n||"Alert"!==(null==t?void 0:t.component)||"google-alias-notice"!==(null==t||null===(i=t.props)||void 0===i?void 0:i.id))return t;var o=h((null==t?void 0:t.fields)||[],e);return b(b({},t),{},{fields:o})}))},h=function(t,e){var n=e.integrationSettingsFormData[e.activeIntegrationId],o=t.map((function(t){if(!["BrandedButton","BrandedLink","CopyInput","LinkedHelpTextInput","LinkedText"].includes(t.component)||!t.external)return t;var o,r=e.i18n.snackbar_url_copied,m=void 0===r?"":r,v=e.Svgs[t.props.Svg],y=null,_={};switch(t.component){case"BrandedButton":y=s.A,_=b(b({},t.props),{},{disabled:!(null!=n&&n.client_id&&null!=n&&n.client_secret)||e.savingSettings,onClick:(o=(0,i.A)(a().mark((function t(i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),t.next=3,e.saveConnectorSettings();case 3:window.location.href="".concat(n.oauth_url,"?client_id=").concat(n.client_id).concat(n.oauth_params);case 4:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),Svg:c.React.createElement(v,null)});break;case"BrandedLink":y=u.A,_=b(b({},t.props),{},{href:"wizard"===e.context?t.wizardHref:t.props.href,Svg:c.React.createElement(v,null)});break;case"CopyInput":y=d.A,_=b(b({},t.props),{},{actionButtonAttributes:b(b({},t.props.actionButtonAttributes),{},{onClick:function(t,n){e.addSnackBarMessage(m),(0,g.Ns)(n)}})});break;case"LinkedHelpTextInput":y=d.A,_=b(b({},t.props),{},{helpTextAttributes:b(b({},t.props.helpTextAttributes),{},{content:c.React.createElement(f.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.helpTextAttributes.content,tokens:t.links.map((function(t){return{component:l.A,key:t.key,props:t.props}}))})})});break;case"LinkedText":y=p.A,_=b(b({},t.props),{},{content:c.React.createElement(f.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.content,tokens:t.links.map((function(t){return{component:l.A,key:t.key,props:t.props}}))})})}return b(b({},t),{},{component:y,props:_})}));return o},k=function(t,e){var n=e.integrationSettingsFormData[e.activeIntegrationId];return t.map((function(t){var e;if("Input"!==t.component||!["username","password"].includes(null==t||null===(e=t.props)||void 0===e?void 0:e.name))return t;var i=b(b({},t.props),{},{disabled:!n.auth});return b(b({},t),{},{props:i})}))},O=function(t){return t.map((function(t){var e,n=((null==t||null===(e=t.props)||void 0===e||null===(e=e.labelAttributes)||void 0===e?void 0:e.label)||"").toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),i=b(b({},t.props),{},{customAttributes:b(b({},t.props.customAttributes),{},{"data-test-id":"form-field-".concat(n)})});return b(b({},t),{},{props:i})}))};e.A=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t),n=O(e),i=y(n,t.activeIntegrationId);if(!["microsoft","google","generic","amazon","zoho"].includes(t.activeIntegrationId))return i;var o=i;return"google"===t.activeIntegrationId&&(o=A(o,t)),["microsoft","google","amazon","zoho"].includes(t.activeIntegrationId)?o=h(o,t):"generic"===t.activeIntegrationId&&(o=k(o,t)),o}},83707:function(t,e,n){n.d(e,{A:function(){return g}});var i,o=n(90455),r=n(78564),a=n.n(r),c=n(27122),s=n.n(c),u=n(40450),l=n.n(u),d=n(60177),p=(null===(i=(0,n(21713).zj)(l(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function g(){return f.apply(this,arguments)}function f(){return f=(0,o.A)(a().mark((function t(){var e,n,i,o,r,c,u,l,g,f,m=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>0&&void 0!==m[0]?m[0]:"",o=m.length>1&&void 0!==m[1]?m[1]:"debug",r=p.data,c=void 0===r?{}:r,u=p.endpoints,g=(null==(l=void 0===u?{}:u)||null===(e=l.log_debug_item)||void 0===e?void 0:e.action)||"",f=(null==l||null===(n=l.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=c&&c.debug_log_enabled&&g&&f&&i){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,d.bE)({endpoint:s(),body:{action:g,security:f,message:i,priority:o}}).catch((function(t){}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}},93313:function(t,e,n){var i=n(52888),o=n(8140);e.A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",n=function(r){return Object.entries(r).reduce((function(r,a){var c=(0,o.A)(a,2),s=c[0],u=c[1];return"object"===(0,i.A)(u)&&null!==u?r[s]=n(u):t.includes(s)?r[s]=null===u?null:e.repeat(u.length):r[s]=u,r}),Array.isArray(r)?[]:{})};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},53015:function(t,e,n){var i,o=n(40450),r=n.n(o),a=(null===(i=(0,n(21713).zj)(r(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};e.A=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==a||null===(t=a.data)||void 0===t||null===(t=t.locked_settings)||void 0===t?void 0:t.includes(e))||n}},27764:function(t,e,n){var i,o=n(40450),r=n.n(o),a=(null===(i=(0,n(21713).zj)(r(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};e.A=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==a||null===(t=a.data)||void 0===t||null===(t=t.locked_settings)||void 0===t?void 0:t.includes(n))||i,lockedMessage:o||(null==a||null===(e=a.i18n)||void 0===e?void 0:e.setting_locked)||""}}}}]);